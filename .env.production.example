# Production Environment Variables Template
# Copy this to .env.production and fill in your actual production values
# DO NOT COMMIT .env.production TO GIT!

# =============================================================================
# BACKEND ENVIRONMENT VARIABLES (Render/Railway/Fly.io)
# =============================================================================

# LLM Provider Selection
LLM_PROVIDER=gemini

# Gemini API Configuration
# Get your key: https://makersuite.google.com/app/apikey
# Free tier: 15 RPM, 1M tokens/month
GEMINI_API_KEY=AIzaSy...your_production_key_here

# Qdrant Vector Store Configuration
# Sign up: https://cloud.qdrant.io
# Free tier: 1GB storage
QDRANT_URL=https://your-production-cluster-abc123.qdrant.io
QDRANT_API_KEY=your_production_qdrant_key_here

# Neon Postgres Configuration
# Sign up: https://neon.tech
# Free tier: 512MB storage, 3GB data transfer/month
NEON_CONNECTION_STRING=postgres://user:password@ep-prod-xyz.us-east-2.aws.neon.tech/neondb?sslmode=require

# Backend Server Configuration
# Use PORT environment variable for platform compatibility (Render, Railway, Fly.io)
BACKEND_HOST=0.0.0.0
# Note: BACKEND_PORT will be set by platform (usually PORT env var)

# CORS Configuration
# IMPORTANT: Add your production frontend URL here
# Multiple origins: Separate with commas (no spaces)
CORS_ORIGINS=https://physical-ai-book.vercel.app,https://www.your-custom-domain.com

# Logging Configuration
# Options: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Recommended: INFO for production, DEBUG for troubleshooting
LOG_LEVEL=INFO

# =============================================================================
# FRONTEND ENVIRONMENT VARIABLES (Vercel/Netlify/GitHub Pages)
# =============================================================================

# Backend API Endpoint
# IMPORTANT: Update this to your production backend URL
REACT_APP_API_ENDPOINT=https://rag-chatbot-backend-abc123.onrender.com

# =============================================================================
# OPTIONAL: Advanced Configuration
# =============================================================================

# RAG Configuration (Optional - Defaults work well)
# CHUNK_SIZE=512                        # Tokens per chunk
# CHUNK_OVERLAP=128                     # Overlapping tokens between chunks
# TOP_K_RESULTS=5                       # Number of similar chunks to retrieve
# SIMILARITY_THRESHOLD=0.7              # Minimum similarity score (0.0-1.0)

# Rate Limiting (Optional - Already configured in code)
# MAX_REQUESTS_PER_MINUTE=15           # Gemini free tier limit
# REQUEST_TIMEOUT_SECONDS=30           # API request timeout

# Session Management (Optional)
# SESSION_RETENTION_DAYS=30            # Auto-delete sessions older than N days

# =============================================================================
# PLATFORM-SPECIFIC NOTES
# =============================================================================

# Render:
#   - Set these in Dashboard → Service → Environment
#   - Automatic redeploy when variables change
#   - Use PORT env var (set automatically)

# Railway:
#   - Set with: railway variables set KEY=value
#   - Or use Railway Dashboard → Variables
#   - Use PORT env var (set automatically)

# Fly.io:
#   - Set with: flyctl secrets set KEY=value
#   - Use PORT env var (set automatically in fly.toml)

# Vercel:
#   - Set in Dashboard → Project → Settings → Environment Variables
#   - Or use: vercel env add KEY
#   - Separate variables for Development/Preview/Production

# Netlify:
#   - Set in Dashboard → Site → Site settings → Environment variables
#   - Or use: netlify env:set KEY value

# =============================================================================
# SECURITY CHECKLIST
# =============================================================================

# Before deploying to production:
# ✅ All API keys are production keys (not development/test keys)
# ✅ CORS_ORIGINS includes ONLY your production frontend domains
# ✅ LOG_LEVEL is set to INFO (not DEBUG, which may leak sensitive data)
# ✅ .env.production is added to .gitignore (never commit secrets!)
# ✅ Database uses SSL connections (sslmode=require for Neon)
# ✅ All URLs use HTTPS (not HTTP)
# ✅ API keys are rotated regularly (recommended: every 90 days)
# ✅ Monitoring is set up (e.g., UptimeRobot)

# =============================================================================
# VERIFICATION COMMANDS
# =============================================================================

# Test backend health:
# curl https://your-backend-url.com/health

# Test API key validity (Gemini):
# curl "https://generativelanguage.googleapis.com/v1beta/models?key=$GEMINI_API_KEY"

# Test Qdrant connection:
# curl -H "api-key: $QDRANT_API_KEY" "$QDRANT_URL/collections"

# Test Neon connection:
# psql "$NEON_CONNECTION_STRING" -c "SELECT version();"

# =============================================================================
# TROUBLESHOOTING
# =============================================================================

# If backend health check fails:
# 1. Verify all environment variables are set correctly
# 2. Check platform logs (Render Dashboard → Logs, etc.)
# 3. Test each external service connection individually
# 4. Ensure CORS_ORIGINS includes your frontend URL

# If CORS errors occur:
# 1. Add frontend URL to CORS_ORIGINS
# 2. Include protocol: https://example.com (not example.com)
# 3. No trailing slash: https://example.com (not https://example.com/)
# 4. Redeploy backend after changing CORS_ORIGINS

# If rate limiting occurs:
# 1. Verify Gemini API quota: https://console.cloud.google.com
# 2. Ensure exponential backoff is working (check logs)
# 3. Consider upgrading to paid tier
# 4. Implement request caching (future enhancement)

# =============================================================================
# SUPPORT
# =============================================================================

# Documentation: /DEPLOYMENT.md
# Quickstart: /specs/002-rag-chatbot/quickstart.md
# Issues: https://github.com/yourusername/physical-ai-book/issues
